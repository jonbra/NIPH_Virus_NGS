// Some default parameters
params {
    skip_assembly = false
    map_to_reference = false
    reportdir = "${params.outdir}/reports"
    kraken_db = "${baseDir}/${params.kraken_focused}"  
    blast_db = "${baseDir}/${params.blast}"
}

/*
process {
      container = null

      withName:FASTQC {
          container = "${params.use_docker ? 'quay.io/biocontainers/fastqc:0.11.9--hdfd78af_1' : null}"
      }

      withName:TRIM {
          container = "${params.use_docker ? 'quay.io/biocontainers/cutadapt:3.7--py37h8902056_1' : null}"
      }

      withName:DEDUP {
        container = "${params.use_docker ? 'darcyabjones/bbmap:latest' : null}"
      }

      withName:INDEX {
          container = "${params.use_docker ? 'jonbra/viral_haplo:1.2' : null}"
      }

      withName:BOWTIE {
          container = "${params.use_docker ? 'jonbra/viral_haplo:1.2' : null}"
      }

      withName:MODIFY_BAM {
          container = "${params.use_docker ? 'jonbra/viral_haplo:1.2' : null}"
      }

      withName:TANOTI {
          container = "${params.use_docker ? 'jonbra/viral_haplo:1.2' : null}"
      }

      withName:CONSENSUS {
          container = "${params.use_docker ? 'jonbra/viral_haplo:1.2' : null}"
      }

      withName:MODIFY_FASTA {
          container = "${params.use_docker ? 'darcyabjones/bbmap:latest' : null}"
      }

      withName:MULTIQC {
          container = "${params.use_docker ? 'quay.io/biocontainers/multiqc:1.12--pyhdfd78af_0' : null}"
      }

      withName:CLIQUE_SNV {
          container = "${params.use_docker ? 'quay.io/biocontainers/cliquesnv:2.0.3--hdfd78af_0' : null}"
      }
      withName:KRAKEN2 {
          container = "${params.use_docker ? 'quay.io/biocontainers/mulled-v2-5799ab18b5fc681e75923b2450abaa969907ec98:87fc08d11968d081f3e8a37131c1f1f6715b6542-0' : null}"
      }
      withName:SUBSET_KRAKEN2 {
          container = "${params.use_docker ? 'quay.io/biocontainers/krakentools:1.2--pyh5e36f6f_0' : null}"
      }
      withName:SPADES {
          container = "${params.use_docker ? 'quay.io/biocontainers/spades:3.15.4--h95f258a_0' : null}"
      }
      withName:BLASTN {
          container = "${params.use_docker ? 'quay.io/biocontainers/blast:2.12.0--pl5262h3289130_0' : null}"
      }
      withName:ABACAS {
          container = "${params.use_docker ? 'quay.io/biocontainers/abacas:1.3.1--pl526_0' : null}"
      }
}
*/

docker {
    enabled = true
}

/*
profiles {
    HCV {
        workDir = "/media/jonr/SATA6TB1/work"
        params {
            reportdir = "$PWD/HCV_results/reports/"
            outdir = "$PWD/HCV_results/"
            taxid = 11102 // Hepacivirus
            kraken_db = "$baseDir/Data/Kraken_db/db_hepacivirus" // NCBI Hepacivirus genomes with HCV genotypes from NCBI added 
            blast_db = "$baseDir/Data/Blast_db/HCVgenosubtypes_8.5.19_clean.fa"
        }
    }
    HBV {

    }
    RVA {
        params {
            reportdir = "$PWD/RVA_results/reports/"
            outdir = "$PWD/RVA_results/"
            taxid = 10912 // Rotavirus
            kraken_db = "$baseDir/Data/Kraken_db/" // NCBI Viral genomes with HCV and Rotavirus genotypes added 
            blast_db = "$baseDir/Data/Blast_db/Rotavirus_genomes_ncbi_edited_names.fasta" // Names edited by adding the genotype information to the fasta headers with underscore before the accession
            reference = "$baseDir/Data/References/Rotavirus_A.fa"
            genotypes = "$baseDir/Data/References/Rotavirus_genotypes.fasta" // Taken from Wahyuni et al. 2021 (https://www.frontiersin.org/articles/10.3389/fmicb.2021.672837/full)
            //The following records can't be retrieved:
            //Id=NYIGB: nuccore: Wrong UID NYIGB
            //Id=ON988161: nuccore: Wrong UID ON988161
            //Id=J492835: nuccore: Wrong UID J492835
            //Id=NYIGB: nuccore: Wrong UID NYIGB
            //Id=NYIGB: nuccore: Wrong UID NYIGB
            //Id=NYIGB: nuccore: Wrong UID NYIGB
            //Id=ON988156: nuccore: Wrong UID ON988156
            //Received lines: 54
            //Rejected lines: 7
            //Removed duplicates: 0
            //Passed to Entrez: 47
            //Retrieve records for 47 UID(s)
            
        }
        
    }
}
*/

process {
    withLabel:spades {
        cpus   = 12
        memory = 72
    }
    withLabel:large {
        cpus = 12
        memory = '16 GB'

    }
    withLabel:small {
        cpus = 2
        memory = '8 GB'
    }
}

//params.reportdir = "$PWD/Rota_results/reports/"

report {
    enabled = true
    file = "$params.reportdir/nextflow_report.html"
}

timeline {
    enabled = true
    file = "$params.reportdir/nextflow_timeline.html"
}

dag {
    enabled = true
    overwrite = true
    file = "$params.reportdir/nextflow_flowchart.html"
}